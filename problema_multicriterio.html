<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Claudia Trias de Tena">

<title>Problema Multicriterio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="problema_multicriterio_files/libs/clipboard/clipboard.min.js"></script>
<script src="problema_multicriterio_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="problema_multicriterio_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="problema_multicriterio_files/libs/quarto-html/popper.min.js"></script>
<script src="problema_multicriterio_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="problema_multicriterio_files/libs/quarto-html/anchor.min.js"></script>
<link href="problema_multicriterio_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="problema_multicriterio_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="problema_multicriterio_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="problema_multicriterio_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="problema_multicriterio_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="problema_multicriterio_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="problema_multicriterio_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="problema_multicriterio_files/libs/viz-1.8.2/viz.js"></script>

<link href="problema_multicriterio_files/libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">

<script src="problema_multicriterio_files/libs/grViz-binding-1.0.11/grViz.js"></script>

<script src="problema_multicriterio_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<script src="problema_multicriterio_files/libs/formattable_widget-binding-0.2.1/formattable_widget.js"></script>



</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="problema_multicriterio.pdf"><i class="bi bi-file-pdf"></i>Typst</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Problema Multicriterio</h1>
<p class="subtitle lead">Elección del mejor plan de ocio</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Claudia Trias de Tena </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div style="page-break-after: always;"></div>
<section id="enunciado" class="level1">
<h1>Enunciado</h1>
<p>Se desea elegir el mejor plan de ocio para realizar en un fin de semana. Se proponen las siguientes <strong>alternativas</strong>:</p>
<ol type="1">
<li><p>Viaje a Madrid: Pasar el fin de semana en la capital con amigos, que incluirá planes culturales y gastronómicos.</p></li>
<li><p>Centro de Sevilla: Pasar el domingo en el centro con amigos, con un paseo por la ciudad y una ruta de tapas por los bares más auténticos.</p></li>
<li><p>Playa de Cádiz: Pasar el sábado en alguna playa de Cádiz.</p></li>
<li><p>Ruta de senderismo por Sierra Morena.</p></li>
</ol>
<p>Para valorar las posibles alternativas se han definido los siguientes <strong>criterios</strong>:</p>
<ol type="1">
<li>Coste:</li>
</ol>
<ul>
<li><p>Transporte: Los viajes a los distintos destinos se harán en coche, luego debemos considerar el gasto de la gasolina.</p></li>
<li><p>Comida: Para la playa y la escapada a la sierra se plantea una comida tipo picnic, mientras que en Madrid y el centro de Sevilla se comerá en bares/restaurantes.</p></li>
<li><p>Alojamiento: El gasto de alojamiento solo se considerará en Madrid, pues los otros planes se han planteado para ida y vuelta el mismo día.</p></li>
</ul>
<ol start="2" type="1">
<li><p>Distancia</p></li>
<li><p>Diversión</p></li>
</ol>
<p>Los primeros dos criterios son de <strong>minimizar</strong> y el último es de <strong>maximizar</strong>.</p>
<p>Con el propósito de esta valoración, se llevarán a cabo distintos <strong>métodos de decisión multicriterio</strong>:</p>
<ul>
<li>AHP</li>
<li>Electre</li>
<li>Promethee</li>
<li>Axiomático de Arrow y Raymond</li>
</ul>
<p>En base a los juicios emitidos por el grupo de amigos, las <strong>matrices de comparaciones</strong> a pares son:</p>
<div style="page-break-after: always;"></div>
<p><strong>Comparación de Criterios:</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Coste</th>
<th style="text-align: right;">Distancia</th>
<th style="text-align: right;">Diversion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Coste</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">Distancia</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Diversion</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Criterio: Coste</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Trans.</th>
<th style="text-align: right;">Comida</th>
<th style="text-align: right;">Alojamiento</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Trans.</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">0.14</td>
</tr>
<tr class="even">
<td style="text-align: left;">Comida</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Alojamiento</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Subcriterio: Transporte</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Madrid</th>
<th style="text-align: right;">Sevilla</th>
<th style="text-align: right;">Cadiz</th>
<th style="text-align: right;">Sierra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Madrid</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sevilla</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">5.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cadiz</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sierra</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">1.0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Subcriterio: Comida</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Madrid</th>
<th style="text-align: right;">Sevilla</th>
<th style="text-align: right;">Cadiz</th>
<th style="text-align: right;">Sierra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Madrid</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.14</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sevilla</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: right;">0.20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cadiz</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sierra</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Subcriterio: Alojamiento</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Madrid</th>
<th style="text-align: right;">Sevilla</th>
<th style="text-align: right;">Cadiz</th>
<th style="text-align: right;">Sierra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Madrid</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.11</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sevilla</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cadiz</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sierra</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Criterio: Distancia</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Madrid</th>
<th style="text-align: right;">Sevilla</th>
<th style="text-align: right;">Cadiz</th>
<th style="text-align: right;">Sierra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Madrid</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sevilla</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">5.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cadiz</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sierra</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">1.0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Criterio: Diversión</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Madrid</th>
<th style="text-align: right;">Sevilla</th>
<th style="text-align: right;">Cadiz</th>
<th style="text-align: right;">Sierra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Madrid</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: right;">0.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sevilla</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">3.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cadiz</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sierra</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="metodo-ahp" class="level1">
<h1>METODO AHP:</h1>
<p>Se han estudiado dos vías para la resolución de un problema multicriterio por el método AHP. La primera es mediante las funciones de clase y la segunda a través de la librería ahp de R. veamos ambas formas:</p>
<section id="funciones-de-clase" class="level2">
<h2 class="anchored" data-anchor-id="funciones-de-clase">Funciones de clase:</h2>
<p>Cargamos los archivos donde están definidas las funciones que vamos a utilizar para resolver el problema multicriterio. Estos nos servirán para la implementación de todos los métodos que vamos a considerar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"teoriadecision_funciones_multicriterio.R"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"teoriadecision_funciones_multicriterio_diagram.R"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"teoriadecision_funciones_multicriterio_utiles.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Cargamos las librerías y funciones necesarias:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(formattable)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmltools)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(webshot)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>export_formattable <span class="ot">&lt;-</span> <span class="cf">function</span>(f, file, <span class="at">width =</span> <span class="st">"100%"</span>, <span class="at">height =</span> <span class="cn">NULL</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">background =</span> <span class="st">"white"</span>, <span class="at">delay =</span> <span class="fl">0.2</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> formattable<span class="sc">::</span><span class="fu">as.htmlwidget</span>(f, <span class="at">width =</span> width, <span class="at">height =</span> height)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> htmltools<span class="sc">::</span><span class="fu">html_print</span>(w, <span class="at">background =</span> background, <span class="at">viewer =</span> <span class="cn">NULL</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"file:///"</span>, <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span>, <span class="st">"/"</span>, <span class="fu">normalizePath</span>(path)))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>webshot<span class="sc">::</span><span class="fu">webshot</span>(url,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">file =</span> file,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">selector =</span> <span class="st">".formattable_widget"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">delay =</span> delay)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Creamos las matrices de comparaciones y guardamos los resultados obtenidos al aplicar el método AHP:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparaciones entre los criterios:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>tb_C <span class="ot">&lt;-</span> <span class="fu">multicriterio.crea.matrizvaloraciones_mej</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">numalternativas =</span><span class="dv">3</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">c</span>(<span class="st">"Coste"</span>, <span class="st">"Distancia"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Diversion"</span>))</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>res_C <span class="ot">&lt;-</span> <span class="fu">multicriterio.metodoAHP.variante3.basico</span>(tb_C)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparaciones entre los subcriterios:</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>tb_SC <span class="ot">&lt;-</span> <span class="fu">multicriterio.crea.matrizvaloraciones_mej</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">numalternativas =</span><span class="dv">3</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">c</span>(<span class="st">"Trans."</span>, <span class="st">"Comida"</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Alojamiento"</span>))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>res_SC <span class="ot">&lt;-</span> <span class="fu">multicriterio.metodoAHP.variante3.basico</span>(tb_SC)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Transporte</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>tb_trans <span class="ot">&lt;-</span> <span class="fu">multicriterio.crea.matrizvaloraciones_mej</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>),</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">numalternativas =</span><span class="dv">4</span>,</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">c</span>(<span class="st">"Madrid"</span>, <span class="st">"Sevilla"</span>,</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Cadiz"</span>, <span class="st">"Sierra"</span>))</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>res_trans <span class="ot">&lt;-</span> <span class="fu">multicriterio.metodoAHP.variante3.basico</span>(tb_trans) </span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Comida</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>tb_comida <span class="ot">&lt;-</span> <span class="fu">multicriterio.crea.matrizvaloraciones_mej</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>, <span class="dv">1</span>),</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">numalternativas =</span><span class="dv">4</span>,</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">c</span>(<span class="st">"Madrid"</span>, <span class="st">"Sevilla"</span>,</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Cadiz"</span>, <span class="st">"Sierra"</span>))</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>res_comida <span class="ot">&lt;-</span> <span class="fu">multicriterio.metodoAHP.variante3.basico</span>(tb_comida)</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Alojamiento</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>tb_alojamiento <span class="ot">&lt;-</span> <span class="fu">multicriterio.crea.matrizvaloraciones_mej</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">9</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">9</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">numalternativas =</span><span class="dv">4</span>,</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">c</span>(<span class="st">"Madrid"</span>, <span class="st">"Sevilla"</span>,</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Cadiz"</span>, <span class="st">"Sierra"</span>))</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>res_alojamiento <span class="ot">&lt;-</span> <span class="fu">multicriterio.metodoAHP.variante3.basico</span>(tb_alojamiento)</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Distancia</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>tb_dist <span class="ot">&lt;-</span> <span class="fu">multicriterio.crea.matrizvaloraciones_mej</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">7</span>,<span class="dv">1</span><span class="sc">/</span><span class="dv">3</span>,<span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">2</span>),</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">numalternativas =</span><span class="dv">4</span>,</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">c</span>(<span class="st">"Madrid"</span>, <span class="st">"Sevilla"</span>,</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Cadiz"</span>, <span class="st">"Sierra"</span>))</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>res_dist <span class="ot">&lt;-</span> <span class="fu">multicriterio.metodoAHP.variante3.basico</span>(tb_dist)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Diversion</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>tb_diversion <span class="ot">&lt;-</span> <span class="fu">multicriterio.crea.matrizvaloraciones_mej</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">7</span>,<span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>,<span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">1</span>),</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">numalternativas =</span><span class="dv">4</span>,</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>                                                 <span class="fu">c</span>(<span class="st">"Madrid"</span>, <span class="st">"Sevilla"</span>,</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"Cadiz"</span>, <span class="st">"Sierra"</span>))</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>res_diversion <span class="ot">&lt;-</span> <span class="fu">multicriterio.metodoAHP.variante3.basico</span>(tb_diversion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Calculamos ahora los pesos de los criterios/subcriterios con respecto a elegir el mejor plan de ocio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>c11 <span class="ot">&lt;-</span> (<span class="fu">as.numeric</span>(res_C<span class="sc">$</span>valoraciones.ahp[<span class="dv">1</span>]<span class="sc">*</span>res_SC<span class="sc">$</span>valoraciones.ahp[<span class="dv">1</span>]))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>c12 <span class="ot">&lt;-</span> (<span class="fu">as.numeric</span>(res_C<span class="sc">$</span>valoraciones.ahp[<span class="dv">1</span>]<span class="sc">*</span>res_SC<span class="sc">$</span>valoraciones.ahp[<span class="dv">2</span>]))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>c13 <span class="ot">&lt;-</span> (<span class="fu">as.numeric</span>(res_C<span class="sc">$</span>valoraciones.ahp[<span class="dv">1</span>]<span class="sc">*</span>res_SC<span class="sc">$</span>valoraciones.ahp[<span class="dv">3</span>]))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>c2 <span class="ot">&lt;-</span> (<span class="fu">as.numeric</span>(res_C<span class="sc">$</span>valoraciones.ahp[<span class="dv">2</span>]))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>c3 <span class="ot">&lt;-</span> (<span class="fu">as.numeric</span>(res_C<span class="sc">$</span>valoraciones.ahp[<span class="dv">3</span>]))</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>crisub <span class="ot">=</span> <span class="fu">c</span>(c11,c12,c13,c2,c3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Agrupamos en una matriz los pesos locales de las alternativas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fu">as.vector</span>(res_trans<span class="sc">$</span>valoraciones.ahp),</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">as.vector</span>(res_comida<span class="sc">$</span>valoraciones.ahp),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">as.vector</span>(res_alojamiento<span class="sc">$</span>valoraciones.ahp),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">as.vector</span>(res_dist<span class="sc">$</span>valoraciones.ahp),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">as.vector</span>(res_diversion<span class="sc">$</span>valoraciones.ahp)),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">ncol =</span> <span class="dv">4</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">nrow =</span> <span class="dv">5</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Por último, calculamos los pesos globales de cada una de las alternativas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>pesos.globales <span class="ot">=</span> crisub <span class="sc">%*%</span> mat</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(pesos.globales) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Madrid"</span>,<span class="st">"Sevilla"</span>,<span class="st">"Cadiz"</span>, <span class="st">"Sierra.M"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(pesos.globales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Madrid</th>
<th style="text-align: right;">Sevilla</th>
<th style="text-align: right;">Cadiz</th>
<th style="text-align: right;">Sierra.M</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.0523337</td>
<td style="text-align: right;">0.4701735</td>
<td style="text-align: right;">0.2448409</td>
<td style="text-align: right;">0.2326519</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Por lo tanto, concluimos que la alternativa pasar el domingo en el centro de Sevilla es la óptima (con un peso global de 47% aprox.), seguida de pasar el sábado en alguna playa de Cádiz (con un peso global de 24% aprox.), una ruta de senderismo por Sierra Morena (con un peso global de 23% aprox.) y por último, la peor alternativa es pasar el fin de semana en Madrid (con un peso global de 5% aprox.).</p>
<section id="estudio-de-la-inconsistencia" class="level3">
<h3 class="anchored" data-anchor-id="estudio-de-la-inconsistencia">Estudio de la inconsistencia</h3>
<p>Al tratarse de matrices 3x3 y 4x4 hay que estudiar la incosistencia.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>incons_1 <span class="ot">=</span> <span class="fu">multicriterio.metodoAHP.coef.inconsistencia</span>(tb_C)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>incons_2 <span class="ot">=</span> <span class="fu">multicriterio.metodoAHP.coef.inconsistencia</span>(tb_SC)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>incons_3 <span class="ot">=</span> <span class="fu">multicriterio.metodoAHP.coef.inconsistencia</span>(tb_trans)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>incons_4 <span class="ot">=</span> <span class="fu">multicriterio.metodoAHP.coef.inconsistencia</span>(tb_comida)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>incons_5 <span class="ot">=</span> <span class="fu">multicriterio.metodoAHP.coef.inconsistencia</span>(tb_alojamiento)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>incons_6 <span class="ot">=</span> <span class="fu">multicriterio.metodoAHP.coef.inconsistencia</span>(tb_dist)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>incons_7 <span class="ot">=</span> <span class="fu">multicriterio.metodoAHP.coef.inconsistencia</span>(tb_diversion)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(incons_1<span class="sc">$</span>mensaje, <span class="fu">round</span>(incons_1<span class="sc">$</span>RI.coef.inconsistencia,<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Consistencia aceptable" "0.0332"                </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(incons_2<span class="sc">$</span>mensaje, <span class="fu">round</span>(incons_2<span class="sc">$</span>RI.coef.inconsistencia,<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Consistencia aceptable" "0.0061"                </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(incons_3<span class="sc">$</span>mensaje, <span class="fu">round</span>(incons_3<span class="sc">$</span>RI.coef.inconsistencia,<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Consistencia aceptable" "0.0071"                </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(incons_4<span class="sc">$</span>mensaje, <span class="fu">round</span>(incons_4<span class="sc">$</span>RI.coef.inconsistencia,<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Consistencia aceptable" "0.0272"                </code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(incons_5<span class="sc">$</span>mensaje, <span class="fu">round</span>(incons_5<span class="sc">$</span>RI.coef.inconsistencia,<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Consistencia aceptable" "0"                     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(incons_6<span class="sc">$</span>mensaje, <span class="fu">round</span>(incons_6<span class="sc">$</span>RI.coef.inconsistencia,<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Consistencia aceptable" "0.0071"                </code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="librería-ahp" class="level2">
<h2 class="anchored" data-anchor-id="librería-ahp">Librería AHP:</h2>
<p>Escribimos el modelo en un fichero ahp, “ejmultinivel.ahp”.</p>
<p>Cargamos el modelo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ahp)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">=</span> <span class="fu">Load</span>(<span class="st">"ejmultinivel.ahp"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Calculamos las prioridades</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Calculate</span>(datos)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(datos, <span class="at">priority =</span> <span class="cf">function</span>(x) x<span class="sc">$</span>parent<span class="sc">$</span>priority[<span class="st">"Total"</span>, x<span class="sc">$</span>name])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      levelName   priority
1  Elegir el mejor plan de ocio         NA
2   ¦--Diversion                0.63698557
3   ¦   ¦--Madrid               0.05187826
4   ¦   ¦--Sevilla              0.52811896
5   ¦   ¦--Cadiz                0.21000139
6   ¦   °--Sierra               0.21000139
7   ¦--Coste                    0.25828499
8   ¦   ¦--Transporte           0.08794621
9   ¦   ¦   ¦--Madrid           0.07217160
10  ¦   ¦   ¦--Sevilla          0.58716568
11  ¦   ¦   ¦--Cadiz            0.21787643
12  ¦   ¦   °--Sierra           0.12278629
13  ¦   ¦--Comida               0.24263692
14  ¦   ¦   ¦--Madrid           0.05059764
15  ¦   ¦   ¦--Sevilla          0.10437661
16  ¦   ¦   ¦--Cadiz            0.42251288
17  ¦   ¦   °--Sierra           0.42251288
18  ¦   °--Alojamiento          0.66941687
19  ¦       ¦--Madrid           0.03571429
20  ¦       ¦--Sevilla          0.32142857
21  ¦       ¦--Cadiz            0.32142857
22  ¦       °--Sierra           0.32142857
23  °--Distancia                0.10472943
24      ¦--Madrid               0.07217160
25      ¦--Sevilla              0.58716568
26      ¦--Cadiz                0.21787643
27      °--Sierra               0.12278629</code></pre>
</div>
</div>
<p>Visualizamos la jerarquía</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Visualize</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item" id="htmlwidget-65717a73ea6cfbe70b11" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-65717a73ea6cfbe70b11">{"x":{"diagram":"digraph {\n\ngraph [rankdir = \"TB\"]\n\n\n\n  \"1\" [label = \"Elegir el mejor plan de ocio\", tooltip = \"\", style = \"filled,rounded\", shape = \"box\", color = \"honeydew4\", fillcolor = \"#F0FFF0\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"black\"] \n  \"2\" [label = \"Diversion\", tooltip = \"priority: 63.7%\n\", style = \"filled,rounded\", shape = \"box\", color = \"honeydew4\", fillcolor = \"#F0FFF0\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"black\"] \n  \"3\" [label = \"Coste\", tooltip = \"priority: 25.8%\n\", style = \"filled,rounded\", shape = \"box\", color = \"honeydew4\", fillcolor = \"#F0FFF0\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"black\"] \n  \"4\" [label = \"Transporte\", tooltip = \"priority: 8.8%\n\", style = \"filled,rounded\", shape = \"box\", color = \"honeydew4\", fillcolor = \"#F0FFF0\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"black\"] \n  \"5\" [label = \"Comida\", tooltip = \"priority: 24.3%\n\", style = \"filled,rounded\", shape = \"box\", color = \"honeydew4\", fillcolor = \"#F0FFF0\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"black\"] \n  \"6\" [label = \"Alojamiento\", tooltip = \"priority: 66.9%\n\", style = \"filled,rounded\", shape = \"box\", color = \"honeydew4\", fillcolor = \"#F0FFF0\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"black\"] \n  \"7\" [label = \"Distancia\", tooltip = \"priority: 10.5%\n\", style = \"filled,rounded\", shape = \"box\", color = \"honeydew4\", fillcolor = \"#F0FFF0\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"black\"] \n  \"8\" [label = \"Alternatives\", tooltip = \"\", style = \"filled,rounded\", shape = \"box\", color = \"thistle4\", fillcolor = \"#D8BFD8\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"\"] \n  \"9\" [label = \"Madrid\", tooltip = \"priority: 5.2%\n\", style = \"filled,rounded\", shape = \"box\", color = \"thistle4\", fillcolor = \"#D8BFD8\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"\"] \n  \"10\" [label = \"Sevilla\", tooltip = \"priority: 52.8%\n\", style = \"filled,rounded\", shape = \"box\", color = \"thistle4\", fillcolor = \"#D8BFD8\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"\"] \n  \"11\" [label = \"Cadiz\", tooltip = \"priority: 21.0%\n\", style = \"filled,rounded\", shape = \"box\", color = \"thistle4\", fillcolor = \"#D8BFD8\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"\"] \n  \"12\" [label = \"Sierra\", tooltip = \"priority: 21.0%\n\", style = \"filled,rounded\", shape = \"box\", color = \"thistle4\", fillcolor = \"#D8BFD8\", penwidth = \"4\", fontname = \"helvetica\", fontcolor = \"\"] \n\"1\"->\"2\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"1\"->\"3\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"1\"->\"7\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"3\"->\"4\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"3\"->\"5\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"3\"->\"6\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"2\"->\"8\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"4\"->\"8\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"5\"->\"8\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"6\"->\"8\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"7\"->\"8\" [arrowhead = \"vee\", color = \"grey35\", penwidth = \"2\", penwidth = \"2\"] \n\"8\"->\"9\" [penwidth = \"2\", color = \"grey35\", penwidth = \"2\", dir = \"none\"] \n\"8\"->\"10\" [dir = \"none\", color = \"grey35\", penwidth = \"2\", dir = \"none\"] \n\"8\"->\"11\" [dir = \"none\", color = \"grey35\", penwidth = \"2\", dir = \"none\"] \n\"8\"->\"12\" [dir = \"none\", color = \"grey35\", penwidth = \"2\", dir = \"none\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Analizamos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>aa <span class="ot">=</span> <span class="fu">AnalyzeTable</span>(datos, <span class="at">variable =</span> <span class="st">"priority"</span>, <span class="at">sort=</span><span class="st">"orig"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>formattable<span class="sc">::</span><span class="fu">as.htmlwidget</span>(aa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-19d184d3e4028286e352" class="formattable_widget html-widget" style="width:100%;height:480px;" width="100%" height="480"></div>
<script type="application/json" data-for="htmlwidget-19d184d3e4028286e352">{"x":{"html":"<table class=\"table table-condensed\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\">   <\/th>\n   <th style=\"text-align:right;\"> Priority <\/th>\n   <th style=\"text-align:right;\"> Madrid <\/th>\n   <th style=\"text-align:right;\"> Sevilla <\/th>\n   <th style=\"text-align:right;\"> Cadiz <\/th>\n   <th style=\"text-align:right;\"> Sierra <\/th>\n   <th style=\"text-align:right;\"> Inconsistency <\/th>\n  <\/tr>\n <\/thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 0em\">Elegir el mejor plan de ocio<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #c1cdc1\">100.0%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\"><\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\"><\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\"><\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\"><\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #eed8ae\">\n  <i class><\/i>\n  3.7%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 1em\">Diversion                   <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #d9e0d9\">63.7%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f3f2f3\">5.2%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">52.8%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #d0cad0\">21.0%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #d0cad0\">21.0%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f2e1c1\">\n  <i class><\/i>\n  2.8%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 1em\">Coste                       <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f3f5f3\">25.8%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\"><\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\"><\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\"><\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\"><\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fbf7f0\">\n  <i class><\/i>\n  0.7%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 2em\">Transporte                  <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff\">8.8%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f0eef0\">7.2%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">58.7%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #d3ced3\">21.8%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #e6e3e6\">12.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fbf7ee\">\n  <i class><\/i>\n  0.7%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 2em\">Comida                      <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f4f6f4\">24.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f1eff1\">5.1%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #e2dee2\">10.4%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">42.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">42.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f2e1c1\">\n  <i class><\/i>\n  2.8%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 2em\">Alojamiento                 <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #d7dfd7\">66.9%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f2f0f2\">3.6%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">32.1%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">32.1%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">32.1%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff\">\n  <i class><\/i>\n  0.0%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 1em\">Distancia                   <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fdfefd\">10.5%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f0eef0\">7.2%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">58.7%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #d3ced3\">21.8%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #e6e3e6\">12.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fbf7ee\">\n  <i class><\/i>\n  0.7%\n<\/span> <\/td>\n  <\/tr>\n<\/tbody>\n<\/table>"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>ab <span class="ot">=</span> <span class="fu">AnalyzeTable</span>(datos, <span class="at">sort=</span><span class="st">"orig"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>formattable<span class="sc">::</span><span class="fu">as.htmlwidget</span>(ab)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-72b8ebcd9f092b8949c9" class="formattable_widget html-widget" style="width:100%;height:480px;" width="100%" height="480"></div>
<script type="application/json" data-for="htmlwidget-72b8ebcd9f092b8949c9">{"x":{"html":"<table class=\"table table-condensed\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\">   <\/th>\n   <th style=\"text-align:right;\"> Weight <\/th>\n   <th style=\"text-align:right;\"> Madrid <\/th>\n   <th style=\"text-align:right;\"> Sevilla <\/th>\n   <th style=\"text-align:right;\"> Cadiz <\/th>\n   <th style=\"text-align:right;\"> Sierra <\/th>\n   <th style=\"text-align:right;\"> Inconsistency <\/th>\n  <\/tr>\n <\/thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 0em\">Elegir el mejor plan de ocio<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #c1cdc1\">100.0%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f2f0f2\">5.2%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #8b7b8b\">47.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #c3bbc3\">24.4%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #c6bec6\">23.1%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #eed8ae\">\n  <i class><\/i>\n  3.7%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 1em\">Diversion                   <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #d8dfd8\">63.7%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f6f5f6\">3.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #aca1ac\">33.6%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #ded9de\">13.4%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #ded9de\">13.4%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f2e1c1\">\n  <i class><\/i>\n  2.8%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 1em\">Coste                       <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f0f2f0\">25.8%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fcfbfc\">1.1%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #ece9ec\">7.5%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #e9e6e9\">8.7%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #eae7ea\">8.5%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fbf7f0\">\n  <i class><\/i>\n  0.7%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 2em\">Transporte                  <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff\">2.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fefefe\">0.2%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fbfbfb\">1.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fdfdfd\">0.5%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fefefe\">0.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fbf7ee\">\n  <i class><\/i>\n  0.7%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 2em\">Comida                      <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fcfcfc\">6.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fefefe\">0.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fdfdfd\">0.7%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f8f7f8\">2.6%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f8f7f8\">2.6%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f2e1c1\">\n  <i class><\/i>\n  2.8%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 2em\">Alojamiento                 <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f5f7f5\">17.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fdfdfd\">0.6%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f1eff1\">5.6%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f1eff1\">5.6%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f1eff1\">5.6%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #ffffff\">\n  <i class><\/i>\n  0.0%\n<\/span> <\/td>\n  <\/tr>\n  <tr>\n   <td style=\"text-align:right;\"> <span style=\"white-space: nowrap; text-align: left; float: left; font-weight: bold; text-indent: 1em\">Distancia                   <\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f9faf9\">10.5%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fdfcfd\">0.8%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #efedef\">6.1%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #f9f8f9\">2.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fbfbfb\">1.3%<\/span> <\/td>\n   <td style=\"text-align:right;\"> <span style=\"display: block; padding: 0 4px; border-radius: 4px; background-color: #fbf7ee\">\n  <i class><\/i>\n  0.7%\n<\/span> <\/td>\n  <\/tr>\n<\/tbody>\n<\/table>"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Luego, concluimos que la alternativa pasar el domingo en el centro de Sevilla es la óptima (con un peso global de 47.3%), seguida de pasar el sábado en alguna playa de Cádiz (con un peso global de 24.4%), una ruta de senderismo por Sierra Morena (con un peso global de 23.1%) y por último, la peor alternativa es pasar el fin de semana en Madrid (con un peso global de 5.2%).</p>
<p>En la primera tabla (Tabla de PESOS LOCALES) observamos que el subcriterio dentro del criterio Coste con mayor peso es Alojamiento. Dentro de este subcriterio, todas las alternativas menos Madrid tienen el mismo peso, como era de esperar, por las valoraciones otorgadas.</p>
<p>En la primera tabla, en el subcriterio comida, las alternativas Cádiz y Sierra tienen un mayor peso, igual para ambas. El peso dentro de los criterios o subcriterios de estas dos alternativas solo difiere en el criterio distancia y transporte, teniendo un mayor peso local la alternativa Cádiz.</p>
<p>La columna de inconsistencia nos proporciona valores menores a 10%, concluyendo así, que la consistencia de las matrices de comparaciones es aceptable.</p>
<p>Los pesos usados para los siguientes métodos son los pesos globales obtenidos por el método AHP.</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="metodo-promethee" class="level1">
<h1>METODO PROMETHEE:</h1>
<p>Para la resolución del problema multicriterio mediante el método promethee, consideramos la siguiente matriz de decisión. Para ello, hemos tenido en cuenta que todos los criterios, menos el criterio “Diversión” son de minimizar, luego los valores correspondientes a estos están multiplicados por menos 1.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">C_trans</th>
<th style="text-align: right;">C_com</th>
<th style="text-align: right;">C_aloj</th>
<th style="text-align: right;">Dist</th>
<th style="text-align: right;">Div</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Madrid</td>
<td style="text-align: right;">-200</td>
<td style="text-align: right;">-100</td>
<td style="text-align: right;">-200</td>
<td style="text-align: right;">-550</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sevilla</td>
<td style="text-align: right;">-5</td>
<td style="text-align: right;">-50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-30</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cadiz</td>
<td style="text-align: right;">-50</td>
<td style="text-align: right;">-5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-100</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sierra M</td>
<td style="text-align: right;">-70</td>
<td style="text-align: right;">-5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-200</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Como hemos mencionado anteriormente, los pesos utilizados en este método son aquellos obtenidos mediante el método AHP.</p>
<p>Además las funciones de preferencia de cada criterio son las siguientes:</p>
<ul>
<li>Criterio Coste_Transporte –&gt; Cuasi Criterio (q = 25)</li>
<li>Criterio Coste_Comida –&gt; Cuasi Criterio (q = 15)</li>
<li>Criterio Coste_Alojamiento –&gt; Cuasi Criterio (q = 20)</li>
<li>Criterio Distancia –&gt; Criterio Nivel (q = 30, p =70 )</li>
<li>Criterio Diversión –&gt; Criterio Nivel (q = 1, p = 3 )</li>
</ul>
<section id="promethee-i" class="level2">
<h2 class="anchored" data-anchor-id="promethee-i">Promethee I:</h2>
<p>Creamos la matriz de decisión, introducimos los pesos y las funciones de preferencia.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">multicriterio.crea.matrizdecision</span>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="sc">-</span><span class="dv">200</span>,<span class="sc">-</span><span class="dv">100</span>,<span class="sc">-</span><span class="dv">200</span>,<span class="sc">-</span><span class="dv">550</span>,<span class="dv">3</span>,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">5</span>, <span class="sc">-</span><span class="dv">50</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">30</span>, <span class="dv">7</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">50</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">100</span>, <span class="dv">5</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">70</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">200</span>, <span class="dv">5</span>), </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">numalternativas =</span> <span class="dv">4</span>, <span class="at">numcriterios =</span> <span class="dv">5</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>pesos <span class="ot">=</span> crisub</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>tab.fpref <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>( <span class="dv">2</span>, <span class="dv">25</span>, <span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">2</span>, <span class="dv">15</span>, <span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">2</span>, <span class="dv">20</span>, <span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">4</span>, <span class="dv">30</span>,<span class="dv">70</span>,<span class="dv">0</span>,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">4</span>, <span class="dv">1</span>,  <span class="dv">3</span>,<span class="dv">0</span>), <span class="at">ncol =</span> <span class="dv">4</span>, <span class="at">byrow=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Resolvemos por el Metodo Promethee I:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">=</span> <span class="fu">multicriterio.metodo.promethee_i</span>(t, pesos, tab.fpref)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(<span class="st">"qgraph"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">qgraph</span>(tab<span class="sc">$</span>tablarelacionsupera)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Vemos como la alternativa 2 domina al resto de alternativas y la alternativa 1 es dominada por todas las demás. Las alternativas 3 y 4 dominan y son dominadas.</p>
</section>
<section id="promethee-ii" class="level2">
<h2 class="anchored" data-anchor-id="promethee-ii">Promethee II:</h2>
<p>Resolvemos por el Metodo Promethee II:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>tab2 <span class="ot">=</span> <span class="fu">multicriterio.metodo.promethee_ii</span>(t, pesos, tab.fpref)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(<span class="st">"qgraph"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">qgraph</span>(tab2<span class="sc">$</span>tablarelacionsupera)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La ordenación final de las alternativas es:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(tab2<span class="sc">$</span>vflujos.netos, <span class="at">decreasing=</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 4 1</code></pre>
</div>
</div>
<p>Se observa que, mediante el método Promethee II (de ordenación total), la alternativa óptima es la 2 (Pasar el doming en el centro de Sevilla), seguido de la alternativa 3 (Pasar el día en alguna playa de Cádiz), la alternativa 4 (Ruta de senderismo por Sierra Morena) y, por último, se concluye, que la peor alternativa es la 1 (Pasar el finde en Madrid).</p>
</section>
<section id="resolución-con-promethee-windows" class="level2">
<h2 class="anchored" data-anchor-id="resolución-con-promethee-windows">Resolución con Promethee Windows:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">multicriterio.metodo.promethee_windows</span>(t, tab.fpref, <span class="fu">round</span>(pesos,<span class="dv">4</span>), </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">fminmax =</span> <span class="fu">c</span>(<span class="st">"min"</span>, <span class="st">"min"</span>,<span class="st">"min"</span>, <span class="st">"min"</span>,<span class="st">"max"</span>))</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(res<span class="sc">$</span>Escenario)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 29%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Criterio1</th>
<th style="text-align: left;">Criterio2</th>
<th style="text-align: left;">Criterio3</th>
<th style="text-align: left;">Criterio4</th>
<th style="text-align: left;">Criterio5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Min/Max</td>
<td style="text-align: left;">min</td>
<td style="text-align: left;">min</td>
<td style="text-align: left;">min</td>
<td style="text-align: left;">min</td>
<td style="text-align: left;">max</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pesos</td>
<td style="text-align: left;">0.023</td>
<td style="text-align: left;">0.0633</td>
<td style="text-align: left;">0.1742</td>
<td style="text-align: left;">0.1062</td>
<td style="text-align: left;">0.6333</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Funciones Preferencias</td>
<td style="text-align: left;">U-shape (2)</td>
<td style="text-align: left;">U-shape (2)</td>
<td style="text-align: left;">U-shape (2)</td>
<td style="text-align: left;">Level (4)</td>
<td style="text-align: left;">Level (4)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q: Indiferencia</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">15</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">30</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">P: Preferencia</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">70</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">S: Gausiano</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Minimo</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">30</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Maximo</td>
<td style="text-align: left;">200</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;">200</td>
<td style="text-align: left;">550</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Media</td>
<td style="text-align: left;">81.25</td>
<td style="text-align: left;">40</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">220</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Desviacion Tipica</td>
<td style="text-align: left;">72.49</td>
<td style="text-align: left;">39.21</td>
<td style="text-align: left;">86.6</td>
<td style="text-align: left;">199.87</td>
<td style="text-align: left;">1.41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">a1</td>
<td style="text-align: left;">200</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;">200</td>
<td style="text-align: left;">550</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">a2</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">30</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">a3</td>
<td style="text-align: left;">50</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">a4</td>
<td style="text-align: left;">70</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">200</td>
<td style="text-align: left;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Vemos los flujos entrantes, salientes y netos ordenados según las alternativas óptimas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(res<span class="sc">$</span>Acciones, <span class="at">align =</span> <span class="fu">c</span>(<span class="st">'c'</span>,<span class="st">'c'</span>,<span class="st">'c'</span>,<span class="st">'c'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">Rango</th>
<th style="text-align: center;">Phi</th>
<th style="text-align: center;">Phi.mas</th>
<th style="text-align: center;">Phi.menos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">a2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0.5884</td>
<td style="text-align: center;">0.6306</td>
<td style="text-align: center;">0.0422</td>
</tr>
<tr class="even">
<td style="text-align: left;">a3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">0.1357</td>
<td style="text-align: center;">0.2843</td>
<td style="text-align: center;">0.1486</td>
</tr>
<tr class="odd">
<td style="text-align: left;">a4</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0.0649</td>
<td style="text-align: center;">0.2489</td>
<td style="text-align: center;">0.1840</td>
</tr>
<tr class="even">
<td style="text-align: left;">a1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">-0.7889</td>
<td style="text-align: center;">0.0000</td>
<td style="text-align: center;">0.7889</td>
</tr>
</tbody>
</table>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="metodo-electre" class="level1">
<h1>METODO ELECTRE:</h1>
<p>Para la resolución del problema multicriterio mediante el método Electre, vamos a hacer uso de la matriz de decisión considerada para el método Promethee, así como de los pesos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">multicriterio.crea.matrizdecision</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="sc">-</span><span class="dv">200</span>,<span class="sc">-</span><span class="dv">100</span>,<span class="sc">-</span><span class="dv">200</span>,<span class="sc">-</span><span class="dv">550</span>,<span class="dv">3</span>,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">5</span>, <span class="sc">-</span><span class="dv">50</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">30</span>, <span class="dv">7</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">50</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">100</span>, <span class="dv">5</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="dv">70</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">200</span>, <span class="dv">5</span>), </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">numalternativas =</span> <span class="dv">4</span>, <span class="at">numcriterios =</span> <span class="dv">5</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>pesos <span class="ot">=</span> crisub</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>d <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">20</span>, <span class="cn">Inf</span>, <span class="cn">Inf</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Resolvemos mediante el Método Electre:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>sol1 <span class="ot">=</span> <span class="fu">multicriterio.metodoELECTRE_I</span>(t, <span class="at">pesos.criterios =</span> pesos,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">nivel.concordancia.minimo.alpha =</span> <span class="fl">0.7</span>,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">no.se.compensan =</span> d,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">que.alternativas =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>qgraph<span class="sc">::</span><span class="fu">qgraph</span>(sol1<span class="sc">$</span>relacion.dominante)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La alternativa 1 es dominada por todas. La alternativa 4 domina a la alternativa 1 y es dominada por la alternativa 3.</p>
<p>En la primera iteración, se tiene que el núcleo (conjunto de alternativas que dominan al resto y no son dominadas por nadie) es:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>sol1<span class="sc">$</span>nucleo_aprox</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a2 a3 
 2  3 </code></pre>
</div>
</div>
<p>Aplicamos el método Electre a las alternativas del núcleo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>sol2 <span class="ot">=</span> <span class="fu">multicriterio.metodoELECTRE_I</span>(t, <span class="at">pesos.criterios =</span> pesos,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">nivel.concordancia.minimo.alpha =</span> <span class="fl">0.7</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">no.se.compensan =</span> d,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">que.alternativas =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>qgraph<span class="sc">::</span><span class="fu">qgraph</span>(sol2<span class="sc">$</span>relacion.dominante)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Reducimos el valor de alpha a 0.55:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>sol3 <span class="ot">=</span> <span class="fu">multicriterio.metodoELECTRE_I</span>(t, <span class="at">pesos.criterios =</span> pesos,</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">nivel.concordancia.minimo.alpha =</span> <span class="fl">0.55</span>,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">no.se.compensan =</span> d,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">que.alternativas =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>qgraph<span class="sc">::</span><span class="fu">qgraph</span>(sol3<span class="sc">$</span>relacion.dominante)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Por último, modificamos d:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>sol4 <span class="ot">=</span> <span class="fu">multicriterio.metodoELECTRE_I</span>(t, <span class="at">pesos.criterios =</span> pesos,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">nivel.concordancia.minimo.alpha =</span> <span class="fl">0.55</span>,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">no.se.compensan =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">10</span>, <span class="cn">Inf</span>, <span class="cn">Inf</span>, <span class="dv">4</span>),</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">que.alternativas =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>qgraph<span class="sc">::</span><span class="fu">qgraph</span>(sol4<span class="sc">$</span>relacion.dominante)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Tras haber probado para distintos valores de d y no llegar a una única alternativa, concluimos con este método que las dos alternativas óptimas son “Pasar el domingo en el Centro de Sevilla” y “Pasar el sábado en alguna playa de Cádiz”. No podemos concluir el dominio de una de estas dos alternativas sobre la otra.</p>
<section id="tablas-de-concordancia-discordancia-y-superación" class="level2">
<h2 class="anchored" data-anchor-id="tablas-de-concordancia-discordancia-y-superación">Tablas de Concordancia, Discordancia y Superación:</h2>
<p>Veamos las tablas de concordancia y discordancia para la primera iteración.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>s1 <span class="ot">=</span> <span class="fu">func_ELECTRE_resTConcordancia</span>(sol1)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">save_kable</span>(s1<span class="sc">$</span>KE, <span class="at">file =</span> <span class="st">"electreTConc.html"</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>webshot2<span class="sc">::</span><span class="fu">webshot</span>(<span class="st">"electreTConc.html"</span>, <span class="at">file =</span> <span class="st">"electreTConc.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Vemos por ejemplo que (a2,a3) y (a2,a4) han superado el test de concordancia.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>s2 <span class="ot">=</span> <span class="fu">func_ELECTRE_resTDiscordancia</span>(sol1)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">save_kable</span>(s2<span class="sc">$</span>KE, <span class="at">file =</span> <span class="st">"electreTDisc.html"</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>webshot2<span class="sc">::</span><span class="fu">webshot</span>(<span class="st">"electreTDisc.html"</span>, <span class="at">file =</span> <span class="st">"electreTDisc.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Vemos como los pares que hemos mencionado para la concordancia, no han superado el test de discordancia.</p>
<p>Para estudiar los pares de alternativas que han superado ambos tests, nos fijamos en la siguiente tabla:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">=</span> <span class="fu">func_ELECTRE_resTSuperacion</span>(sol1)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">save_kable</span>(s3<span class="sc">$</span>KE, <span class="at">file =</span> <span class="st">"electreTSup.html"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>webshot2<span class="sc">::</span><span class="fu">webshot</span>(<span class="st">"electreTSup.html"</span>, <span class="at">file =</span> <span class="st">"electreTSup.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problema_multicriterio_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Observamos que los pares de alternativas (con la primera dominando la segunda) que han superado ambos tests son: (a2,a1), (a3, a1), (a4, a1), (a3,a4). Esto también lo hemos visto en el primer grafo, donde el arco de un nodo a otro, indica el dominio del nodo saliente sobre el entrante.</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="metodo-axiomatico-de-arrow-y-raymond" class="level1">
<h1>METODO AXIOMATICO DE ARROW Y RAYMOND</h1>
<p>Para este método consideramos la misma matriz de decisión que la de los métodos Promethee y Electre.</p>
<p>Implementamos el método:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>sol <span class="ot">=</span> <span class="fu">multicriterio.metodoaxiomatico.ArrowRaymond</span>(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Las iteraciones/pasos del método son:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>sol<span class="sc">$</span>pasos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[[1]]$Mclasificacion
   a1  a2  a3  a4
a1 NA 0.0 0.0 0.0
a2  5  NA 3.5 3.5
a3  5 1.5  NA 3.5
a4  5 1.5 1.5  NA

[[1]]$max.filas
a1 a2 a3 a4 
 0  5  5  5 

[[1]]$indices.ordenados
[1] 1 2 3 4

[[1]]$alternativa.sale
[1] "a1"


[[2]]
[[2]]$Mclasificacion
    a2  a3  a4
a2  NA 3.5 3.5
a3 1.5  NA 3.5
a4 1.5 1.5  NA

[[2]]$max.filas
 a2  a3  a4 
3.5 3.5 1.5 

[[2]]$indices.ordenados
[1] 3 1 2

[[2]]$alternativa.sale
[1] "a4"


[[3]]
[[3]]$Mclasificacion
    a2  a3
a2  NA 3.5
a3 1.5  NA

[[3]]$max.filas
 a2  a3 
3.5 1.5 

[[3]]$indices.ordenados
[1] 2 1

[[3]]$alternativa.sale
[1] "a3"</code></pre>
</div>
</div>
<p>Una vez hemos visto todas las iteraciones, vemos las alternativas ordenadas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>sol<span class="sc">$</span>alternativasordenadas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a2" "a3" "a4" "a1"</code></pre>
</div>
</div>
<p>De manera que la alternativa óptima segundo este método es la 2, “Pasar el domingo en el centro de Sevilla”, seguida de la alternativa 3 y 4 y, concluyendo que la peor alternativa es “Pasar el fin de semana en Madrid”.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="conclusión-final" class="level1">
<h1>Conclusión Final</h1>
<p>Tras haber aplicado los distintos métodos estudiados en clase para nuestro problema de decisión multicriterio, en el que teníamos que elegir el mejor plan para un fin de semana, podemos concluir que “Pasar el domingo en el Centro de Sevilla” es elegida como la alternativa óptima según la mayoría de los métodos.</p>
<p>A pesar de esto, en el método Electre no hemos podido obtener una relación de dominio entre las alternativas “Pasar el domingo en el Centro de Sevilla” y “Pasar el sábado en alguna playa de Cádiz”.</p>
<p>Por último, recalcar que la alternativa “Pasar el fin de semana en Madrid” ha sido elegida como la peor alternativa según todos los métodos utilizados.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>